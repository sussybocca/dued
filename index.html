<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vibro Home - 1980s</title>
</head>
<body bgcolor="black" text="lime" link="cyan" vlink="yellow" alink="red">
<center>
<h1><blink>🎶 WELCOME TO VIBRO 🎶</blink></h1>
<img src="https://upload.wikimedia.org/wikipedia/commons/7/7e/Under_construction.gif" alt="Under Construction">

<table border="1" cellpadding="5" cellspacing="2" bgcolor="purple">
<tr><td>
<h2>Loading user info...</h2>
<p id="user-info">Please wait...</p>
</td></tr>

<tr><td>
<b>Music Player:</b><br>
<iframe id="music-player" width="320" height="180"
src="https://www.youtube.com/embed/mO3kyMnuf6c?enablejsapi=1&autoplay=0&loop=1&playlist=mO3kyMnuf6c&mute=1"
frameborder="0"></iframe><br>
<button id="music-control">▶ Play Music</button>
</td></tr>

<tr><td>
<b>Videos:</b><br>
<iframe width="320" height="180" src="https://www.youtube.com/embed/WePNs-G7puA"></iframe><br>
<iframe width="320" height="180" src="https://www.youtube.com/embed/W9kH0TlWasI"></iframe><br>
<iframe width="320" height="180" src="https://www.youtube.com/embed/KQmlzT-OfmI?start=1125"></iframe>
</td></tr>

<tr><td>
<marquee behavior="scroll" direction="left">Click buttons below to navigate!</marquee><br>
<button onclick="goProfile()">PROFILE</button>
<button onclick="logout()">LOGOUT</button>
</td></tr>
</table>

<p><font color="red">🌟 Totally Retro 1980s Vibes 🌟</font></p>
</center>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js"></script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";
import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyB6xF5RTX6wy87TT17q61nUzoHI70JBkcA",
  authDomain: "funfu-b4ad8.firebaseapp.com",
  projectId: "funfu-b4ad8",
  storageBucket: "funfu-b4ad8.appspot.com",
  messagingSenderId: "400767863064",
  appId: "1:400767863064:web:xxxxxxxx",
  databaseURL: "https://funfu-b4ad8-default-rtdb.firebaseio.com"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getDatabase(app);

let player;
let isPlaying = false;

const tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
document.body.appendChild(tag);

window.onYouTubeIframeAPIReady = () => { player = new YT.Player('music-player'); };
document.getElementById('music-control').addEventListener('click', () => {
  if (!isPlaying) { player.playVideo(); player.unMute(); document.getElementById('music-control').innerText="⏸ Pause Music"; }
  else { player.pauseVideo(); document.getElementById('music-control').innerText="▶ Play Music"; }
  isPlaying = !isPlaying;
});

onAuthStateChanged(auth, async user => {
  if (user) {
    document.getElementById("user-info").innerText = `Hi, ${user.displayName || user.email}!`;
    const snapshot = await get(ref(db, 'users/' + user.uid));
    if (snapshot.exists()) { const data = snapshot.val(); document.getElementById("user-info").innerText += ` | Provider: ${data.provider || "email"} | Joined: ${new Date(data.createdAt).toLocaleDateString()}`; }
  } else { window.location.href="login.html"; }
});

window.goProfile = () => window.location.href="profile.html";
window.logout = () => signOut(auth).then(()=>window.location.href="login.html");
</script>
</body>
</html>
